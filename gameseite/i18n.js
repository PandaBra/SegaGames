const translations = {
    ru: {
        "site_title": "Sega Online - –ò–≥—Ä–∞–π—Ç–µ –≤ —Ä–µ—Ç—Ä–æ –∏–≥—Ä—ã",
        "site_header": "Sega Genesis Games",
        "nav_home": "üéÆ –ò–≥—Ä—ã",
        "nav_feedback": "üìù –û—Ç–∑—ã–≤—ã",
        "upload_label": "üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—é –∏–≥—Ä—É (.md, .gen)",
        "fullscreen": "‚õ∂ –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω",
        "close_game": "–ó–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É",
        "click_to_start": "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–≥—Ä—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.",
        "lang_btn": "EN",
        "site_desc": "–ò–≥—Ä–∞–π—Ç–µ –≤ —Ä–µ—Ç—Ä–æ –∏–≥—Ä—ã –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ",
        "games_section": "–°–ø–∏—Å–æ–∫ –∏–≥—Ä",
        "play_btn": "–ò–≥—Ä–∞—Ç—å",
        "footer_text": "Sega Online Emulator - 2026",
        "connect_mobile": "–ò–≥—Ä–∞–π—Ç–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ:",
        "scan_qr": "–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥",
        "settings_title": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
        "settings_size": "–†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:",
        "settings_save": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
        "feedback_title": "–û—Ç–∑—ã–≤—ã –∏ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è",
        "feedback_name": "–í–∞—à–µ –∏–º—è:",
        "feedback_text": "–í–∞—à –æ—Ç–∑—ã–≤:",
        "feedback_submit": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å",
        "feedback_list": "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã",
        "back_to_menu": "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é",
        "exit_game": "–í—ã—Ö–æ–¥",
        "feedback_placeholder_name": "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è",
        "feedback_placeholder_text": "–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤ –∑–¥–µ—Å—å...",
        "error_file_not_found": "–û—à–∏–±–∫–∞: –§–∞–π–ª –∏–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω",
        "error_file_desc": "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å:",
        "error_file_tip": "–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ø–∞–ø–∫–µ <b>roms</b>.",
        "game_not_selected": "–ò–≥—Ä–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞",
        "alert_fullscreen_error": "–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º.",
        "nav_chat": "üí¨ –ß–∞—Ç",
        "chat_header": "–ß–∞—Ç –ò–≥—Ä–æ–∫–æ–≤",
        "chat_loading": "–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...",
        "chat_disclaimer": "–°–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞.",
        "chat_send": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å",
        "chat_name_placeholder": "–í–∞—à–µ –∏–º—è",
        "chat_text_placeholder": "–°–æ–æ–±—â–µ–Ω–∏–µ..."
    },
    en: {
        "site_title": "Sega Online - Play Retro Games",
        "site_header": "Sega Genesis Games",
        "nav_home": "üéÆ Games",
        "nav_feedback": "üìù Feedback",
        "upload_label": "üìÇ Upload your ROM (.md, .gen)",
        "fullscreen": "‚õ∂ Fullscreen",
        "close_game": "Close Game",
        "click_to_start": "Click on a game to start.",
        "lang_btn": "RU",
        "site_desc": "Play retro games directly in your browser",
        "games_section": "Games List",
        "play_btn": "Play",
        "footer_text": "Sega Online Emulator - 2026",
        "connect_mobile": "Play on mobile:",
        "scan_qr": "Scan QR Code",
        "settings_title": "Settings",
        "settings_size": "Controller Size:",
        "settings_save": "Save",
        "feedback_title": "Feedback & Suggestions",
        "feedback_name": "Your Name:",
        "feedback_text": "Your Feedback:",
        "feedback_submit": "Submit",
        "feedback_list": "Latest Reviews",
        "back_to_menu": "Back to Menu",
        "exit_game": "Exit",
        "feedback_placeholder_name": "Enter your name",
        "feedback_placeholder_text": "Write your feedback here...",
        "error_file_not_found": "Error: Game file not found",
        "error_file_desc": "Could not load:",
        "error_file_tip": "Make sure the file exists in the <b>roms</b> folder.",
        "game_not_selected": "No game selected",
        "alert_fullscreen_error": "Your browser does not support fullscreen mode.",
        "nav_chat": "üí¨ Chat",
        "chat_header": "Players Chat",
        "chat_loading": "Loading messages...",
        "chat_disclaimer": "Messages are automatically deleted after 24 hours.",
        "chat_send": "Send",
        "chat_name_placeholder": "Your Name",
        "chat_text_placeholder": "Message..."
    }
};

function setLanguage(lang) {
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translations[lang][key];
            } else if (element.tagName === 'INPUT' && element.type === 'button') {
                element.value = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        if (translations[lang][key]) {
            element.placeholder = translations[lang][key];
        }
    });

    // Update button text
    const langBtns = document.querySelectorAll('#lang-toggle, #lang-toggle-player');
    langBtns.forEach(btn => {
        btn.textContent = lang === 'ru' ? 'EN' : 'RU';
    });
}

function toggleLanguage() {
    const currentLang = localStorage.getItem('language') || 'ru';
    const newLang = currentLang === 'ru' ? 'en' : 'ru';
    setLanguage(newLang);
}

// Initialize on load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('language') || 'ru';
    setLanguage(savedLang);

    const langBtn = document.getElementById('lang-toggle');
    if (langBtn) {
        langBtn.addEventListener('click', (e) => {
            e.preventDefault();
            toggleLanguage();
        });
    }
});
